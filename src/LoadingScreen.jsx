import { useRef, useEffect } from 'react';
import "./LoadingScreen.css";

const LoadingScreen = ({ progress, onStart }) => {
    const logoCoverAnimationRef = useRef(null);
    const typeCoverAnimationRef = useRef(null);
    const progressBarRef = useRef(null);

  useEffect(() => { 
    logoCoverAnimationRef.current.style.setProperty('--loading-delay', `${(-(progress * .01) + 0.01)}s`);
      typeCoverAnimationRef.current.style.setProperty('--loading-delay', `${(-(progress * .01) + 0.01)}s`);
      progressBarRef.current.style.width = `${progress}%`;
  }, [progress]);

   return (<div className="loading">
   <svg id="tosku-logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1782.02 576.43">
  <path strokeWidth="8" d="M838.62,423.81c-20.93-.81-49.13-.46-76.91-5.53-24.29-4.44-47.24-12.29-67-27.1-19.33-14.48-27-34.47-27.42-57.61-.07-3.92,2.49-3,4.62-3,34.5-.02,68.99-.02,103.49-.02.5,0,1.01.05,1.5,0,2.46-.29,3.35.62,3.73,3.14,1.74,11.38,8.79,18.83,19.41,23.33,9.09,3.85,18.73,5.62,28.53,6.46,22.94,1.97,45.85,2.69,68.39-3.35,4.02-1.08,7.85-2.59,11.4-4.76,6.5-3.99,9.77-9.67,8.92-17.11-.88-7.63-5.37-12.51-12.97-14.94-16.07-5.13-32.75-5.23-49.36-5.81-28.26-.98-56.59-.31-84.72-3.9-24.27-3.1-47.65-8.85-68.7-21.61-25.06-15.19-33.95-37.7-31.57-65.32.46-5.31,1.68-10.49,3.04-15.66,5.24-19.91,20.49-30.59,38.2-38.87,20.36-9.51,42.27-13.22,64.5-15.57,43.69-4.61,87.45-3.97,131.16-.86,26.19,1.86,51.6,7.48,75.19,19.22,24.6,12.24,38.87,31.1,39.81,58.58.11,3.28-.77,3.72-3.7,3.72-34.83-.07-69.66-.05-104.49-.03-1.94,0-3.5.01-4.07-2.4-2.22-9.38-9.35-14.03-17.98-17.16-16.57-6.01-33.84-6.56-51.2-5.86-11.8.48-23.59,1.42-35.38,2.16-4.69.3-9.16,1.39-13.5,3.15-7.19,2.91-9.84,6.88-9.53,14.67.29,7.12,3.2,10.58,10.39,12.99,18.57,6.21,37.88,6.3,57.18,7.05,31.25,1.21,62.56,1.51,93.7,4.7,18.13,1.85,35.69,6.01,52.23,13.64,19.01,8.77,30.99,22.76,34.27,43.31,2.34,14.65,2.66,29.21-.69,43.76-5.45,23.71-21.74,38-43.59,47.56-21.46,9.39-44.26,13.65-67.42,16.42-24.02,2.87-48.17,3-79.48,2.62Z" fill="none" stroke="#555" strokeMiterlimit="10"/>
  <path strokeWidth="8" d="M1417.98,416.85c-7.07,0-12.87,0-18.67,0-34.66,0-69.32-.04-103.99.05-4.46.01-7.81-1.24-10.97-4.49-34.71-35.71-69.58-71.29-104.37-106.92-1.48-1.52-2.7-3.27-4.39-5.33-1.63,2.62-1.08,4.4-1.09,6.04-.04,35.22-.09,70.44.06,105.66.02,3.71-.83,4.78-4.82,4.75-33.49-.17-66.99-.16-100.48-.01-3.68.02-4.71-.76-4.71-4.48.11-115.03.12-230.06,0-345.09,0-3.81,1.22-4.44,4.8-4.43,33.33.13,66.66.16,99.98-.02,4.32-.02,5.07,1.3,5.07,5.16-.13,62.85-.09,125.69-.09,188.54v6.23c5.79-5.45,10.79-10.09,15.72-14.8,28.1-26.89,56.24-53.74,84.2-80.78,4.55-4.4,9.25-6.51,15.83-6.46,35.49.26,70.99.12,106.48.12h4.61c.64,1.77-.58,2.13-1.22,2.73-39.68,36.85-79.36,73.71-119.12,110.48-2.25,2.08-2.66,3.11-.23,5.52,35.79,35.62,71.46,71.37,107.14,107.1,9.83,9.85,19.62,19.73,30.26,30.43Z" fill="none" stroke="#555" strokeMiterlimit="10" />
  <path strokeWidth="8" d="M1672.22,373.71c-1.92,1.63-3.83,3.09-5.56,4.73-21.95,20.78-48.51,33.01-78.14,39.41-35.28,7.63-70.3,7.73-104.69-4.42-39.4-13.92-62.23-40.95-67.97-81.32-.48-3.34-.54-6.76-.55-10.15-.03-52.02.02-104.04-.12-156.06-.01-3.94.91-5.13,5.14-5.1,33.49.18,66.99.17,100.48,0,3.98-.02,4.91,1.05,4.89,4.81-.14,39.74-.14,79.48-.05,119.22.02,10.53,1.44,20.87,5.51,30.79,7.48,18.23,20.95,29.39,40.9,33.06,22.13,4.08,43.7,3.29,64.11-7.1,23.01-11.71,34.7-30.12,35.12-55.39.67-40.05.74-80.1.51-120.16-.03-4.42,1.26-5.26,5.55-5.24,33.16.18,66.32.16,99.48.02,3.64-.02,4.7.7,4.7,4.46-.13,82.23-.13,164.46,0,246.69,0,3.94-1.21,4.64-4.94,4.63-32.83-.14-65.65-.15-98.48.01-4.02.02-5.41-.77-5.29-4.93.32-10.98.13-21.97.08-32.95,0-1.54.47-3.16-.67-5.02Z" fill="none" stroke="#555" strokeMiterlimit="10"/>
  <path strokeWidth="8" d="M51.75,292.77c0-19.06-.08-38.12.08-57.18.03-3.35-.83-4.35-4.38-4.3-14.16.2-28.32-.02-42.48.16-3.33.04-4.5-.55-4.47-4.1.19-20.84.17-41.67.02-62.51-.02-3.28.69-4.38,4.31-4.33,14.16.22,28.33-.07,42.48.19,3.92.07,4.56-1.12,4.53-4.58-.17-21.8.02-43.61-.18-65.42-.03-3.72,1.07-4.53,4.73-4.51,32.99.13,65.98.16,98.97-.03,4.19-.02,4.85,1.34,4.82,4.94-.15,21.64.02,43.29-.17,64.93-.03,3.58.8,4.57,4.59,4.5,14.32-.25,28.66,0,42.98-.18,3.26-.04,4.11.8,4.09,3.96-.15,21-.17,42,.01,62.99.03,3.51-1.06,4.18-4.44,4.13-14.16-.19-28.32.05-42.48-.17-3.5-.05-4.7,1.02-4.67,4.25.26,30.36-.5,60.72.49,91.07.01.32.03.65.07.97,1.59,14.95,4.4,17.54,19.88,18.09,8.98.32,17.96.63,26.94.66,3.06.01,4.24.5,4.21,3.86-.18,20.84-.17,41.67,0,62.51.02,3.17-.93,4.22-4.1,4.19-33.64-.33-67.31.85-100.93-.61-27.57-1.2-45.31-17.02-51.95-45.25-1.97-8.37-2.87-16.87-2.9-25.44-.06-17.61-.02-35.21-.02-52.82Z" fill="none" stroke="#555" strokeMiterlimit="10"/>
     <path strokeWidth="8" d="M469.27,423.81c-30.76,1.85-61.42.14-92.02-2.65-40.42-3.68-77.21-16.23-107.58-43.33-17.08-15.24-26.9-34.46-31.58-56.4-6.06-28.42-5.05-56.35,4.77-83.91,9.95-27.93,30.71-46.14,56.66-59.7,25.12-13.12,52.31-19.55,80.46-22.14,38.53-3.55,77.19-3.11,115.73-.81,35.67,2.12,69.96,10.05,100.77,28.82,30.31,18.45,46.34,45.24,50.15,79.45,2.37,21.32,1.86,42.44-2.37,63.53-6.79,33.85-27.47,57.19-58.12,73.17-23.33,12.16-48.51,18.19-74.57,21.35-14.05,1.7-28.18,2.18-42.3,2.63Z M440.55,221.86c-13.37.51-27.99,1.12-42.26,4.75-40.66,10.32-59.9,42.06-48.6,80.66,6.26,21.4,22.77,32.84,43.11,40.26,19.27,7.02,39.35,7.52,59.55,6.81,16.59-.58,32.62-3.65,47.77-10.58,25.42-11.64,37.91-32.52,36.54-61.54-1.14-24.18-16.34-43.25-41.41-52.23-17.27-6.19-35.27-7.67-54.69-8.12Z" fill="none" stroke="#555" strokeMiterlimit="10"/>

  <path  mask="url(#fill-mask-two)" fill="#2a2a2a" strokeWidth="8" transform="scale(1.05) translate(-20,-15)" d="M469.27,423.81c-30.76,1.85-61.42.14-92.02-2.65-40.42-3.68-77.21-16.23-107.58-43.33-17.08-15.24-26.9-34.46-31.58-56.4-6.06-28.42-5.05-56.35,4.77-83.91,9.95-27.93,30.71-46.14,56.66-59.7,25.12-13.12,52.31-19.55,80.46-22.14,38.53-3.55,77.19-3.11,115.73-.81,35.67,2.12,69.96,10.05,100.77,28.82,30.31,18.45,46.34,45.24,50.15,79.45,2.37,21.32,1.86,42.44-2.37,63.53-6.79,33.85-27.47,57.19-58.12,73.17-23.33,12.16-48.51,18.19-74.57,21.35-14.05,1.7-28.18,2.18-42.3,2.63Z"/>
        <path
         mask="url(#fill-mask)"
         fill="white"
        d="M587.46,237.66c-13.59,0-25.88-.03-38.16.03-1.8,0-3.16-.82-4.62-1.59-34.33-18.18-71.1-28.37-109.45-33.35-4.37-.57-9.94-3.13-12.83-.38-2.58,2.46-.72,8.21-.72,12.5-.05,37.81-.08,75.62.05,113.43.01,3.53-.56,4.79-4.52,4.77-36.64-.23-73.28-.23-109.92-.24-2.25,0-4.15-.49-6.05-1.73-5.44-3.54-10.72-7.26-16.07-11.84,8.81-2.26,17.26-4.14,25.54-6.59,20.45-6.06,39.45-14.82,54.98-30,16.55-16.18,25.89-36.35,32.44-58.07,7.67-25.42,11.16-51.62,13.95-77.91,4.84-45.66,6.47-91.54,8.55-137.38.14-3.11.64-6.2.98-9.31.02,0,.15,0,.27.02-.09.13-.26.26-.26.39,0,56.8.05,113.59-.04,170.39,0,3.34,1.1,3.97,4.15,4.25,46.53,4.26,90.82,16.05,131.45,39.82,10.61,6.21,20.52,13.4,30.3,22.8Z M159.67,332.97c29.47-2.93,58.8-4.81,88.58-8.37-14.73-21.6-19.41-45.05-14.69-71.75,1.28,5.06,2.12,8.87,3.22,12.61,8.3,28.11,26.02,49.06,50.09,64.93,30.59,20.16,64.43,32.76,99.88,41.01,50.13,11.66,100.51,12.58,150.9,1.41,26.2-5.81,50.38-15.78,69.74-35.21,6.73-6.75,12.13-14.48,16.89-22.77-.3,14.04-5.05,26.58-12.74,38.08-13.99,20.93-33.94,33.84-57.32,41.9-27.5,9.49-56.04,12.54-84.94,13.11-7.32.14-14.66.06-21.98-.21-2.81-.11-3.7.86-4.04,3.49-3.32,26.42-5.71,52.93-7.13,79.51-1.49,28.06-2.71,56.14-4.06,84.21-.02.46-.27.91-.47,1.52-.95-1.91-.49-3.77-.49-5.56-.03-52.97-.09-105.95.1-158.92.02-4.31-1.17-5.44-5.28-5.85-37.97-3.82-74.53-13.1-109.27-29.08-22.7-10.44-43.63-23.49-60.35-42.42-1.79-2.03-3.71-1.8-5.81-1.8-28.48.04-56.97.1-85.45.16-1.8,0-3.59,0-5.39,0Z M705.23,246.29c-34.83,3.08-68.37,4.37-102.23,8.8,13.28,18.96,16.49,39.4,10.81,61.3-3.13-23.41-16.35-40.68-33.22-55.81-1.28-1.15-2.48-2.07-4.38-1.72-22.61,4.2-44.85,9.5-65.34,20.51-26.65,14.32-42.93,37.04-52.68,65-2.57,7.36-4.81,14.86-6.69,22.42-.74,2.97-1.94,3.76-4.69,3.55-3.98-.31-7.99-.65-11.96-.46-3.24.15-3.83-1.09-3.8-4.02.13-16.66.06-33.32.06-49.98,0-21.49.12-42.99-.1-64.48-.04-4.09.87-5.22,5.11-5.21,88.64.14,177.27.1,265.91.1h3.2Z M242.07,260.93c2.8-18.89,9.29-35.98,24.11-49.15,18.54-16.48,40.85-25.08,64.46-30.84,21.59-5.26,43.56-7.27,65.76-7.2,3.41.01,4.24.83,3.53,4.15-1.22,5.68-2.28,11.42-2.97,17.18-.45,3.77-1.68,5.07-5.81,5.05-27.9-.18-55.42,2.91-82.01,11.79-17.58,5.87-34.35,13.38-48.22,26.18-5.8,5.35-10.31,11.71-14.49,18.32-1.05,1.65-2.06,3.33-3.1,4.99-.42-.16-.84-.32-1.26-.47Z"/>
    
       <mask id="fill-mask">
          <g className="fill-group">
            <rect x="150" y="0" width="550" height="800" fill="white" />
           <rect ref={ logoCoverAnimationRef } className="fill-rect" x="150" y="0" width="550" height="800" fill="black" />
          </g>
       </mask>
       
       <mask id="fill-mask-two">
        <g className="fill-group">
           <rect strokeWidth="8" x="150" y="0" width="550" height="800" fill="white" />
           <rect ref={ typeCoverAnimationRef } className="fill-rect" strokeWidth="8px" x="150" y="0" width="550" height="800" fill="black" />
        </g>
      </mask>
       </svg>
        <div className="progress-bar-container">
            <div ref={progressBarRef} id="progress-bar" className="progress-bar"></div>
        </div>
    {progress< 100 ? <div className="loading-greeting">loading<div className="dot-container">
        <span className="dot">.</span>
        <span className="dot">.</span>
        <span className="dot">.</span>
    </div></div> : <div className='welcome-section'><span
           className="greeting">Welcome</span>
         <div className="welcome-buttons">

            <button onClick={onStart}>Enter</button>

       </div></div>}
  </div>)
};

export default LoadingScreen;